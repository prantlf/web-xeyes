import{r as t,c as i,h as s,H as e}from"./p-381d3cb3.js";const r={distance:0,reset:!1,radius:"natural",position:"center",delay:0,trigger:window},o={top:90,bottom:-90,left:180,right:0,topRight:45,topLeft:135,bottomRight:-45,bottomLeft:-135};class h{constructor(t){this.el=t,this.width=t.offsetWidth,this.height=t.offsetHeight}resetOffset(){const t=this.el.getBoundingClientRect(),i=this.el.ownerDocument.defaultView,s=t.top+i.pageYOffset,e=t.left+i.pageXOffset,r=i.getComputedStyle(this.el);this.offset={x:e+this.width/2-parseInt(r.left),y:s+this.height/2-parseInt(r.top)}}setOffset({x:t,y:i}){this.el.style.left=`${t}px`,this.el.style.top=`${i}px`}}class a{constructor(t,i){this.el=t,this.width=this.el.scrollWidth,this.height=this.el.scrollHeight,this.iris=new h(i),this.position={x:(this.width-this.iris.width)/2,y:(this.height-this.iris.height)/2},this.iris.setOffset(this.position),this.distance=0}follow(t){t.x=t.x-this.position.x,t.y=t.y-this.position.y,this.iris.resetOffset();const i=Math.atan((t.y-this.iris.offset.y)/(t.x-this.iris.offset.x)),s=this.iris.offset.x>t.x?-1:1,e=Math.cos(i)*((this.width-this.iris.width)/2-this.distance)*s,r=Math.sin(i)*((this.height-this.iris.height)/2-this.distance)*s,o=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),h=Math.sqrt(Math.pow(t.y-this.iris.offset.y,2)+Math.pow(t.x-this.iris.offset.x,2));this.iris.setOffset(o>h?{x:t.x-this.iris.offset.x+this.position.x,y:t.y-this.iris.offset.y+this.position.y}:{x:this.position.x+e,y:this.position.y+r})}setPosition(t){if("object"==typeof t)this.iris.setOffset({x:this.position.x-t.x,y:this.position.y-t.y});else if("number"==typeof t){const i=t*Math.PI/-180;this.iris.setOffset({x:this.position.x+Math.cos(i)*(this.width/2-this.iris.width/2-this.distance),y:this.position.y+Math.sin(i)*(this.height/2-this.iris.height/2-this.distance)})}else if("center"===t)this.iris.setOffset({x:this.position.x,y:this.position.y});else if("string"==typeof t&&void 0!==o[t]){const i=o[t]*Math.PI/-180;this.iris.setOffset({x:this.position.x+Math.cos(i)*(this.width/2-this.iris.width/2-this.distance),y:this.position.y+Math.sin(i)*(this.height/2-this.iris.height/2-this.distance)})}const i=this.options.onReset;i&&i()}}function n(t,i={}){const{distance:s=r.distance,position:e=r.position,radius:o=r.radius}=i,h=new a(t.parentElement,t);return h.options=i,h.distance=s,"circular"==o&&h.width>h.height?h.width=h.height:"circular"==o&&(h.height=h.width),h.setPosition(e),h}function l(t){t.el=null,t.iris.el=null}function c(t){const{delay:i=r.delay,position:s=r.position,reset:e=r.reset,trigger:o=r.trigger}=t.options;let h=!0;if(t.mousemove=({pageX:s,pageY:e})=>{h&&(i?setTimeout((()=>{h&&t.follow({x:s,y:e})}),i):t.follow({x:s,y:e}))},o.addEventListener("mousemove",t.mousemove),e){const e=o===window?document:o.ownerDocument;t.mouseenter=()=>{h=!0},e.addEventListener("mouseenter",t.mouseenter),t.mouseleave=()=>{h=!1,i?setTimeout((()=>t.setPosition(s)),i):t.setPosition(s)},e.addEventListener("mouseleave",t.mouseleave)}}function d(t){const{reset:i=r.reset,trigger:s=r.trigger}=t.options;if(s.removeEventListener("mousemove",t.mousemove),t.mousemove=null,i){const i=s===window?document:s.ownerDocument;i.removeEventListener("mouseenter",t.mouseenter),t.mouseenter=null,i.removeEventListener("mouseleave",t.mouseleave),t.mouseleave=null}}const u=class{constructor(s){t(this,s),this.resetPositionEvent=i(this,"resetposition",7),this.delay=0,this.distance=0,this.position="center",this.radius="natural",this.reset=!1}validateDelay(t){p("delay",t)}validateDistance(t){p("distance",t)}validatePosition(t){if(null!=t&&""!==t&&"center"!==t&&"top"!==t&&"bottom"!==t&&"left"!==t&&"right"!==t&&"topRight"!==t&&"topLeft"!==t&&"bottomRight"!==t&&"bottomLeft"!==t&&!f(t))throw new Error('position has to be "center", "top", "bottom", "left", "right", "topRight", "topLeft", "bottomRight", "bottomLeft" or an positive integet, if not empty')}validateRadius(t){if(null!=t&&""!==t&&"natural"!==t&&"circular"!==t)throw new Error('radius has to be "natural" or "circular", if not empty')}validateReset(t){if(null!=t&&""!==t&&"true"!==t&&"false"!==t&&!0!==t&&!1!==t)throw new Error("reset has to be a boolean, if not empty")}render(){return s(e,null,s("div",{class:"eye"},s("div",{class:"iris",ref:t=>this.leftIrisEl=t})),s("div",{class:"eye"},s("div",{class:"iris",ref:t=>this.rightIrisEl=t})))}async startFollowing(){if(this.leftEye&&!this.leftEye.mousemove)return c(this.leftEye),c(this.rightEye),!0}async stopFollowing(){if(this.leftEye&&this.leftEye.mousemove)return d(this.leftEye),d(this.rightEye),!0}async resetPosition(){if(this.leftEye)return this.leftEye.setPosition(this.position),this.rightEye.setPosition(this.position),!0}connectedCallback(){this.startFollowing()}componentWillRender(){this.leftEye&&(this.stopFollowing(),l(this.leftEye),l(this.rightEye))}componentDidRender(){const{delay:t,distance:i,position:s,radius:e,reset:r}=this,o={delay:t,distance:i,position:s,radius:e,reset:r,onReset:()=>{this.resetPositionEvent.emit()}};this.leftEye=n(this.leftIrisEl,o),this.rightEye=n(this.rightIrisEl,o),this.startFollowing()}disconnectedCallback(){this.stopFollowing()}static get watchers(){return{delay:["validateDelay"],distance:["validateDistance"],position:["validatePosition"],radius:["validateRadius"],reset:["validateReset"]}}};function p(t,i){if(null!=i&&""!==i&&!f(i))throw new Error(`${t} has to be a positive integer, if not empty`)}function f(t){const i=+t;return i>=0&&i===Math.floor(i)}u.style=":host{--scale:1;--rim-color:rgba(0,0,0,1);--rim-style:solid;--rim-thickness:calc(var(--scale) * 7px);--eye-color:#fff;--eye-width:calc(var(--scale) * 110px);--eye-height:calc(var(--scale) * 150px);--pupil-color:#000;--iris-color:#000;--iris-breadth:calc(var(--scale) * 7px);--iris-diameter:calc(var(--scale) * 25px);display:inline-block;width:calc(var(--eye-width) * 2 + var(--rim-thickness) * 2 + 1);height:calc(var(--eye-height) + var(--rim-thickness) * 2)}.eye{width:var(--eye-width);height:var(--eye-height);background:var(--eye-color);border-radius:50%;border-width:var(--rim-thickness);border-style:var(--rim-style);border-color:var(--rim-color);position:relative;display:inline-block;cursor:none}.iris{background:var(--pupil-color);width:calc(var(--iris-diameter) - var(--iris-breadth) * 2);height:calc(var(--iris-diameter) - var(--iris-breadth) * 2);border-radius:50%;border:var(--iris-breadth) solid var(--iris-color);position:absolute}";export{u as x_eyes}